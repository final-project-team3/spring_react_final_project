<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fproject.project_team3.mapper.ProductMapper">
    <!-- HSH -->
    <select id="getKind" resultType="com.fproject.project_team3.dto.product.ProductKindDto">
        SELECT distinct product_gender
        FROM product_kind
        order by product_gender
    </select>

    <select id="getSmallKind" resultType="com.fproject.project_team3.dto.product.ProductKindDto">
        SELECT product_small_kind
        FROM product_kind
        WHERE product_gender = #{productBigKind}
    </select>

    <select id="getSearchProductList" parameterType="String"
            resultType="com.fproject.project_team3.dto.product.ProductInfoDto">
        SELECT *
        FROM product_info
        WHERE product_name LIKE CONCAT('%', #{searchContent}, '%')
    </select>

    <insert id="productInfoInsert" parameterType="String">
        INSERT INTO product_info(product_kind_num, product_name, product_price, product_seller_id,
                                 product_registration_date, product_img, product_content, review_star_point,
                                 product_delivery_day)
        VALUES (#{productKindNum}, #{productName}, #{productPrice}, #{productSellerId},
                DATE_FORMAT(now(), '%Y-%m-%d'), "testImg", "testContent", "3", "2")
    </insert>

    <select id="getProductInfoLatest" resultType="String">
        SELECT product_num
        FROM product_info
        ORDER BY product_num DESC LIMIT 1;
    </select>

    <!--    <insert id="productOptionInsert" parameterType="Object">-->
    <!--        INSERT INTO product_option(product_num, product_coupon_useable, product_option_1,-->
    <!--                                   product_option_2, product_quantity, product_option_price)-->
    <!--        VALUES (#{productNum}, #{productCouponUseable}, #{productOption1}, #{productOption2},-->
    <!--                #{productQuantity}, #{productOptionPrice})-->
    <!--    </insert>-->

    <insert id="productOptionInsert" parameterType="com.fproject.project_team3.dto.product.ProductOptionDto">
        INSERT INTO product_option(product_num, product_coupon_useable, product_option_1,
        product_option_2, product_quantity, product_option_price)
        VALUES
        <foreach item="item" collection="list" separator=",">
            (#{item.productNum}, #{item.productCouponUseable}, #{item.productOption1}, #{item.productOption2},
            #{item.productQuantity}, #{item.productOptionPrice})
        </foreach>
    </insert>

    <select id="getProductList" resultType="com.fproject.project_team3.dto.product.ProductInfoDto">
        SELECT *
        FROM product_info
        ORDER BY product_num DESC;
    </select>

    <select id="getProductInfoFromDetail" parameterType="Object"
            resultType="com.fproject.project_team3.dto.product.ProductInfoDto">
        SELECT *
        FROM product_info
        WHERE product_num = #{productNum};
    </select>

    <select id="getProductOptionList" parameterType="Object"
            resultType="com.fproject.project_team3.dto.product.ProductOptionDto">
        SELECT *
        FROM product_option
        WHERE product_num = #{productNum};
    </select>

    <!-- HSH -->

    <!-- LYS -->

    <!-- LYS -->

    <!-- GJY -->
    <select id="getProductSelectList" resultType="com.fproject.project_team3.dto.product.ProductKindDto">
        SELECT distinct product_gender
        FROM product_kind
        order by product_gender
    </select>

    <select id="getProductSmallSelectList" parameterType="String"
            resultType="com.fproject.project_team3.dto.product.ProductKindDto">
        SELECT product_small_kind
        FROM product_kind
        where product_gender = #{productKind}
    </select>

    <!--    <select id="getSelectTestData" parameterType="int" resultType="com.fproject.project_team3.dto.gwak.GwakTestTblDto">-->
    <!--        SELECT img-->
    <!--        FROM gwak_test_tbl-->
    <!--        where idx = #{idx}-->
    <!--    </select>-->

    <insert id="getSelectTestData" parameterType="byte">
        insert
        gwak_test_tbl
    (img)
    value (
        #{img}
        );
    </insert>

    <!--  신규상품 정보 등록 -->
    <insert id="insertProductData" parameterType="com.fproject.project_team3.dto.product.ProductInfoDto">
        INSERT INTO product_info(product_num, product_kind_num, product_name, product_price, product_seller_id,
                                 product_registration_date, product_img, product_content, review_star_point,
                                 product_delivery_day, product_qty)
        VALUES (null, #{productKindNum}, #{productName}, #{productPrice}, #{productSellerId},
                DATE_FORMAT(now(), '%Y-%m-%d'), "testImg", "testContent", "3", "2", #{productQty});
    </insert>

    <!--    제품 이름 중복 검사 -->
    <select id="checkProductName" parameterType="com.fproject.project_team3.dto.product.ProductInfoDto"
            resultType="int">
        SELECT COUNT(product_name)
        FROM product_info
        where product_seller_id = #{productSellerId}
          AND product_name = #{productName}
    </select>


    <!-- GJY -->

    <!-- BJH -->

    <!-- BJH -->

    <!-- LSH -->

    <!-- LSH -->
</mapper>
